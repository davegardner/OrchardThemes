@using Orchard.Mvc.Html
@using Orchard.ContentManagement
@using Orchard.Utility.Extensions
@{
    if (Model.Title != null)
    {
        Layout.Title = Model.Title;
    }

    Model.Classes.Add("content-item");

    var contentTypeClassName = ((string)Model.ContentItem.ContentType).HtmlClassify();
    Model.Classes.Add(contentTypeClassName);

    var tag = Tag(Model, "article");

    var bookPart = Model.ContentItem.BookPart;
    var byLine = "";
    if (String.IsNullOrEmpty(bookPart.Author.Value))
    {
        byLine = String.IsNullOrEmpty(bookPart.Illustrator.Value) ? "" : "Illustrated by " + bookPart.Illustrator.Value + ". ";
    }
    else
    {
        byLine = bookPart.Author.Value;
        byLine += String.IsNullOrEmpty(bookPart.Illustrator.Value) ? "" : ". Illustrated by " + bookPart.Illustrator.Value + ". ";
    }
}
@tag.StartElement
<div class="book-summary">
    <a class="cover" href="@Url.ItemDisplayUrl((ContentItem)Model.ContentItem)">
        <img src="@bookPart.CoverImage.FirstMediaUrl" />
    </a>
    <div class="blurb">
        <div class="category">@bookPart.Category.Value</div>
        <div class="details">
            <div class="title">@Html.ItemDisplayLink((String)Model.TitlePart.Title, (ContentItem)Model.ContentItem)</div>
            <div class="byLine">@byLine</div>
            <div class="summary">@bookPart.Summary.Value</div>
        </div>
        <a class="more btn btn-sm " href="@Url.ItemDisplayUrl((ContentItem)Model.ContentItem)"><i class='fa fa-arrow-right'></i></a>
    </div>
</div>
@tag.EndElement